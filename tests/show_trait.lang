// Comprehensive tests for Show trait

// ==========================================
// 1. Built-in types use default Show
// ==========================================

print("=== Built-in types ===")
print(show(42))           // 42
print(show(3.14))         // 3.14
print(show(true))         // true
print(show(false))        // false
print(show('x'))          // 'x'
print(show("hello"))      // hello
print(show([1, 2, 3]))    // [1, 2, 3]
print(show((1, "two")))   // (1, two)
print(show(Some(5)))      // Some(5)
print(show(None))         // None
print(show(Ok(42)))       // Ok(42)
print(show(Fail("err")))  // Fail(err)
print(show(Nil))          // Nil

// ==========================================
// 2. Custom Show instance for user type
// ==========================================

print("=== Custom Show instance ===")

type alias Point = { x: Int, y: Int }

instance Show Point {
    fun show(p) {
        format("Point(%d, %d)", p.x, p.y)
    }
}

p = Point { x: 10, y: 20 }
print(show(p))  // Point(10, 20)

// ==========================================
// 3. Show for ADT
// ==========================================

print("=== ADT with Show ===")

type Color = Red | Green | Blue | RGB(Int)

instance Show Color {
    fun show(c) {
        match c {
            Red -> "Red"
            Green -> "Green"
            Blue -> "Blue"
            RGB(value) -> format("RGB(%d)", value)
            _ -> "Unknown"
        }
    }
}

print(show(Red))        // Red
print(show(Green))      // Green
print(show(RGB(255)))   // RGB(255)

// ==========================================
// 4. Type without custom Show (fallback)
// ==========================================

print("=== Fallback Show ===")

type alias Person = { name: String, age: Int }

person = Person { name: "Alice", age: 30 }
print(show(person))  // {name: Alice, age: 30}

// ==========================================
// 5. Show in generic context
// ==========================================

print("=== Generic context ===")

fun display<t: Show>(x: t) {
    print(format("Value: %s", show(x)))
}

display(42)
display(p)
display(Red)

// ==========================================
// 6. Show with nested types
// ==========================================

print("=== Nested types ===")

print(show([p, Point { x: 0, y: 0 }]))  // Uses structural for list elements
print(show(Some(p)))  // Uses structural for Option content

// ==========================================
// 7. Integration with format
// ==========================================

print("=== Integration with format ===")

formatted = format("The point is: %s", show(p))
print(formatted)  // The point is: Point(10, 20)

formatted2 = format("Color: %s, Int: %d", show(Blue), 42)
print(formatted2)  // Color: Blue, Int: 42

